package org.jarenas.ca.java.jdbc;import org.jarenas.ca.java.jdbc.model.Categoria;import org.jarenas.ca.java.jdbc.model.Producto;import org.jarenas.ca.java.jdbc.repositorio.CategoriaRepositorioImpl;import org.jarenas.ca.java.jdbc.repositorio.ProductoRepositorioImpl;import org.jarenas.ca.java.jdbc.repositorio.Repositorio;import org.jarenas.ca.java.jdbc.repositorio.RepositorioCategoria;import org.jarenas.ca.java.jdbc.util.ConexionBaseDatos;import java.sql.Connection;import java.sql.SQLException;import java.util.Date;import java.util.Scanner;import static org.jarenas.ca.java.jdbc.EjemploJdbc.menu;public class EjemploJdbc2 {    public static void main(String[] args) throws SQLException {        //Instanciando los objetos en los parantesis del try, usamos el autoclose de estos        try (Connection conn = ConexionBaseDatos.getConnection()) {            if (conn.getAutoCommit()) {                conn.setAutoCommit(false);            }            try {                Repositorio<Producto> rp = new ProductoRepositorioImpl(conn);                RepositorioCategoria<Categoria> rpc = new CategoriaRepositorioImpl(conn);                System.out.println(" === Listado categorias === ");                rpc.listarCategoria().forEach(System.out::println);                System.out.println(" === Guardando nueva categoria === ");                Categoria cat = new Categoria();                cat.setNombre("Electrohogar");                Categoria newCat = rpc.guardar(cat);                System.out.println("Categoria guardado: " + cat.getId());                System.out.println(" === LISTADO DE PRODUCTOS ===");                rp.listar().forEach(System.out::println);                System.out.println(" =============================================== ");                System.out.println(" === Ingrese el ID del producto ===");                System.out.println(rp.porId(10L));                System.out.println(" =============================================== ");                System.out.println(" === Guardar producto === ");                Producto prod = new Producto();                prod.setNombre("Licuadora Black and Decker");                prod.setPrecio(160);                prod.setFechaRegistro(new Date());                prod.setCategoria(newCat);                prod.setSku("jucare123");                rp.guardar(prod);                System.out.println("Producto guardado: " + prod.getId());                rp.listar().forEach(System.out::println);                conn.commit();            }catch (SQLException e){                conn.rollback();                e.printStackTrace();            }        }    }}